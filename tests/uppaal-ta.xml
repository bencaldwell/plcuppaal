<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE nta PUBLIC "-//Uppaal Team//DTD Flat System 1.1//EN" "http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd">
<nta>
  <declaration>//constantsconst int DELAY = 1000;
//inputsint[0,1] IN, RST;
//outputsint[0,1] OUT, ON;
//input sync channelsbroadcast chan chIN,chINiut,chRST,chRSTiut;
//output sync channelsbroadcast chan chOUT,chOUTiut,chON,chONiut;
</declaration>
    <template>
    <name x="5" y="5">iut</name>
    
    <declaration></declaration>
    
    <location id="id0" x="-609" y="-228">
      <name x="-609" y="-213">id0</name>
      
      
      
      
    </location>

    <location id="id1" x="-40" y="-27">
      <name x="-40" y="-12">inINOff</name>
      
      
      <committed />
      
    </location>

    <location id="id2" x="-181" y="-27">
      <name x="-181" y="-12">inINOn</name>
      
      
      <committed />
      
    </location>

    <location id="id3" x="-331" y="-27">
      <name x="-331" y="-12">inRSTOff</name>
      
      
      <committed />
      
    </location>

    <location id="id4" x="-492" y="-27">
      <name x="-492" y="-12">inRSTOn</name>
      
      
      <committed />
      
    </location>

    <location id="id5" x="-652" y="-27">
      <name x="-652" y="-12">outOUTOn</name>
      
      
      <committed />
      
    </location>

    <location id="id6" x="-813" y="-27">
      <name x="-813" y="-12">outOUTOff</name>
      
      
      <committed />
      
    </location>

    <location id="id7" x="-967" y="-27">
      <name x="-967" y="-12">outONOn</name>
      
      
      <committed />
      
    </location>

    <location id="id8" x="-1150" y="-27">
      <name x="-1150" y="-12">outONOff</name>
      
      
      <committed />
      
    </location>
    
    <init ref="id0" />
    
    <transition>
      <source ref="id0" />
      <target ref="id1" />
      
      <label kind="guard" x="-61" y="-112">IN==0</label>
      <label kind="synchronisation" x="-61" y="-97">chINiut?</label>
      
      
    </transition>

    <transition>
      <source ref="id1" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id2" />
      
      <label kind="guard" x="-202" y="-112">IN==1</label>
      <label kind="synchronisation" x="-202" y="-97">chINiut?</label>
      
      
    </transition>

    <transition>
      <source ref="id2" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id3" />
      
      <label kind="guard" x="-353" y="-112">RST==0</label>
      <label kind="synchronisation" x="-353" y="-97">chRSTiut?</label>
      
      
    </transition>

    <transition>
      <source ref="id3" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id4" />
      
      <label kind="guard" x="-513" y="-112">RST==1</label>
      <label kind="synchronisation" x="-513" y="-97">chRSTiut?</label>
      
      
    </transition>

    <transition>
      <source ref="id4" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id5" />
      
      
      <label kind="synchronisation" x="-674" y="-97">chOUTiut!</label>
      <label kind="assignment" x="-674" y="-82">OUT:=1</label>
      
    </transition>

    <transition>
      <source ref="id5" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id6" />
      
      
      <label kind="synchronisation" x="-833" y="-97">chOUTiut!</label>
      <label kind="assignment" x="-833" y="-82">OUT:=0</label>
      
    </transition>

    <transition>
      <source ref="id6" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id7" />
      
      
      <label kind="synchronisation" x="-984" y="-97">chONiut!</label>
      <label kind="assignment" x="-984" y="-82">ON:=1</label>
      
    </transition>

    <transition>
      <source ref="id7" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id8" />
      
      
      <label kind="synchronisation" x="-1135" y="-97">chONiut!</label>
      <label kind="assignment" x="-1135" y="-82">ON:=0</label>
      
    </transition>

    <transition>
      <source ref="id8" />
      <target ref="id0" />
      
      
      
      
      
    </transition>
  </template>
  <template>
    <name x="5" y="5">env</name>
    
    <declaration></declaration>
    
    <location id="id0" x="-570" y="-228">
      <name x="-570" y="-213">id0</name>
      
      
      
      
    </location>

    <location id="id1" x="-40" y="-27">
      <name x="-40" y="-12">outOUTOn</name>
      
      
      <committed />
      
    </location>

    <location id="id2" x="-189" y="-27">
      <name x="-189" y="-12">outOUTOff</name>
      
      
      <committed />
      
    </location>

    <location id="id3" x="-331" y="-27">
      <name x="-331" y="-12">outONOn</name>
      
      
      <committed />
      
    </location>

    <location id="id4" x="-466" y="-27">
      <name x="-466" y="-12">outONOff</name>
      
      
      <committed />
      
    </location>

    <location id="id5" x="-592" y="-27">
      <name x="-592" y="-12">inINOff</name>
      
      
      <committed />
      
    </location>

    <location id="id6" x="-711" y="-27">
      <name x="-711" y="-12">inINOn</name>
      
      
      <committed />
      
    </location>

    <location id="id7" x="-840" y="-27">
      <name x="-840" y="-12">inRSTOff</name>
      
      
      <committed />
      
    </location>

    <location id="id8" x="-1014" y="-27">
      <name x="-1014" y="-12">inRSTOn</name>
      
      
      <committed />
      
    </location>
    
    <init ref="id0" />
    
    <transition>
      <source ref="id0" />
      <target ref="id1" />
      
      <label kind="guard" x="-62" y="-112">OUT==1</label>
      <label kind="synchronisation" x="-62" y="-97">chOUT?</label>
      
      
    </transition>

    <transition>
      <source ref="id1" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id2" />
      
      <label kind="guard" x="-210" y="-112">OUT==0</label>
      <label kind="synchronisation" x="-210" y="-97">chOUT?</label>
      
      
    </transition>

    <transition>
      <source ref="id2" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id3" />
      
      <label kind="guard" x="-352" y="-112">ON==1</label>
      <label kind="synchronisation" x="-352" y="-97">chON?</label>
      
      
    </transition>

    <transition>
      <source ref="id3" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id4" />
      
      <label kind="guard" x="-487" y="-112">ON==0</label>
      <label kind="synchronisation" x="-487" y="-97">chON?</label>
      
      
    </transition>

    <transition>
      <source ref="id4" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id5" />
      
      
      <label kind="synchronisation" x="-609" y="-97">chIN!</label>
      <label kind="assignment" x="-609" y="-82">IN:=0</label>
      
    </transition>

    <transition>
      <source ref="id5" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id6" />
      
      
      <label kind="synchronisation" x="-723" y="-97">chIN!</label>
      <label kind="assignment" x="-723" y="-82">IN:=1</label>
      
    </transition>

    <transition>
      <source ref="id6" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id7" />
      
      
      <label kind="synchronisation" x="-853" y="-97">chRST!</label>
      <label kind="assignment" x="-853" y="-82">RST:=0</label>
      
    </transition>

    <transition>
      <source ref="id7" />
      <target ref="id0" />
      
      
      
      
      
    </transition>

    <transition>
      <source ref="id0" />
      <target ref="id8" />
      
      
      <label kind="synchronisation" x="-999" y="-97">chRST!</label>
      <label kind="assignment" x="-999" y="-82">RST:=1</label>
      
    </transition>

    <transition>
      <source ref="id8" />
      <target ref="id0" />
      
      
      
      
      
    </transition>
  </template>
  <template>
    <name x="5" y="5">dly</name>
    <parameter>broadcast chan &amp;in, broadcast chan &amp;out</parameter>
    <declaration>clock x;</declaration>
    
    <location id="id0" x="-83" y="-228">
      <name x="-83" y="-213">idle</name>
      
      
      
      
    </location>

    <location id="id1" x="-83" y="-27">
      <name x="-83" y="-12">in_transit</name>
      <label kind="invariant" x="-83" y="3">x&lt;=DELAY</label>
      
      
      
    </location>
    
    <init ref="id0" />
    
    <transition>
      <source ref="id0" />
      <target ref="id1" />
      
      
      <label kind="synchronisation" x="-68" y="-97">in?</label>
      <label kind="assignment" x="-68" y="-82">x:=0</label>
      
    </transition>

    <transition>
      <source ref="id1" />
      <target ref="id0" />
      
      
      <label kind="synchronisation" x="-104" y="-97">out!</label>
      
      
    </transition>
  </template>

  <system>//delay buffersINdly = dly(chIN,chINiut);RSTdly = dly(chRST,chRSTiut);OUTdly = dly(chOUT,chOUTiut);ONdly = dly(chON,chONiut);//templates in the systemsystem env,iut,INdly,RSTdly,OUTdly,ONdly;
</system>
</nta>